
<!doctype html>
<html lang="en">
  <head>
    <title>
      FubuMVC - Extending Diagnostics</title>
    
<meta charset="utf-8"/>
<meta name="description" content="FubuDocs"/>
<meta name="author" content="FubuDocs"/>




<link href="/_content/styles/sons-of-obsidian.css" rel="stylesheet" type="text/css" />
<link href="/_content/styles/toastr.css" rel="stylesheet" type="text/css" />
<link href="/_content/styles/twitter/bootstrap.min.css" rel="stylesheet" type="text/css" />
<link href="/_content/styles/twitter/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
<link href="/_content/styles/toastr-responsive.css" rel="stylesheet" type="text/css" />
<link href="/_content/styles/fubudocs.core.css" rel="stylesheet" type="text/css" />
<link href="/_content/styles/fubudocs.theme.css" rel="stylesheet" type="text/css" />

<link media="screen" type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Oswald:400,300">

    
  </head>
  <body data-spy="scroll" data-target=".bs-docs-sidebar" position="relative">
      
    <div class="container">
      
      

<div class="row">
  <div class="span6">
    <p class="logo">
      <a href="/topics" title="Fubu" class="root-link"><span>Fubu</span></a>
      <a href="/fubumvc" title="The .Net web development framework that gets out of your way" class="project-logo"><span>FubuMVC</span></a>
    </p>
  </div>
  <div class="span6">
    <div class="top-header text-right">
      <em>
        <em><a href="https://groups.google.com/forum/?fromgroups#!forum/fubumvc-devel">Join our vibrant mailing list</a></em>
      </em>
      <div class="social">
        <a href="http://github.com/DarthFubuMVC/FubuMVC" class="ico-github"><img alt="Github" src="/_content/images/github-icon.png" /></a>
      </div>
    </div>
  </div>
</div>
      

      <div id="nav-follow" class="navbar">
        <div class="navbar-inner">
          <div class="container">
            <ul class="nav"><li><a href="/fubumvc/index" data-key="index">FubuMVC &#187;</a></li><li><a href="/fubumvc/diagnostics" data-key="index">FubuMVC.Diagnostics &#187;</a></li><li class="active"><a href="/fubumvc/diagnostics/extending" data-key="index">Extending Diagnostics &#187;</a></li></ul>
<ul class="nav" style="float:right"><li><a href="/fubumvc/diagnostics/services" title="Service Registration">Previous</a></li><li><a href="/fubumvc/automated-testing" title="Automated Testing">Next</a></li></ul>
          </div>
        </div>
      </div>
      <hr/>
      <div class="row">
        
        

        <div class="row">
          <div class="span3 sidebar" data-spy="affix" data-offset-top="150" data-offset-bottom="200">
            
            <h3 class="half-margin">Topics</h3>
            <ul id="page-toc" class="nav nav-tabs nav-stacked bs-docs-sidebar">
            </ul>
            <br/>
            <h3>
              FubuMVC v1.0.0.0
            </h3>

            <br/>
            <h3 class="no-margin">Next</h3>
<p><a href="/fubumvc/automated-testing" data-key="index">Automated Testing</a></p>
<h3 class="no-margin">Previous</h3>
<p><a href="/fubumvc/diagnostics/services" data-key="index">Service Registration</a></p>
          </div>
          <div class="span9">

              <h1 class="no-margin">Extending Diagnostics</h1>
              <hr class="header-line topic-line"></hr>

            <!--Title: Extending Diagnostics-->
<p>As of the v0.9.7 release, you can embed diagnostics in any FubuMVC or FubuTransportation Bottle that can be read and displayed by FubuMVC.Diagnostics with some simple naming conventions.</p>

<div class="alert alert-info"><i class="icon-info-sign"></i>Your assemblies can expose diagnostic views without any references to <code>FubuMVC.Diagnostics</code> or even <code>FubuMVC.Core</code> itself.</div>

<p>FubuMVC.Diagnostics will look in your main application assembly and any assembly loaded by a Bottle (<code>PackageRegistry.PackageAssemblies</code>) for classes that match a naming convention explained in the section below.
The diagnostic views are grouped by .Net assembly -- i.e., all the diagnostic pages in the <code>FubuTransportation</code> assembly would be grouped together under <em>FubuTransportation</em> in the navigation.</p>

<p>Your diagnostic views and actions are just regular FubuMVC views and actions with the exception that you should ensure that all views are exempted from your application's layout because FubuMVC.Diagnostics will try to wrap your view's content with the standard diagnostic screen <em>Chrome</em> and navigation elements.</p>

<p>Disabling the application's master layout with Spark:</p>

<pre data-linenums="3" class="prettyprint lang-html">
&lt;use master=&quot;&quot; /&gt;
</pre> 

<p>From the FubuMVC.Diagnostics <em>Chrome</em> html, you can assume the presence in your views of:</p>

<ol>
<li>The Asset Pipeline functionality</li>
<li>Twitter Bootstrap styles</li>
<li>jquery</li>
</ol>

<p>The diagnostic extensions are found by looking for concrete classes that are suffixed by <em>FubuDiagnostics</em> like the sample below:</p>

<pre data-linenums="24" class="prettyprint lang-cs">
    public class SampleFubuDiagnostics
    {
        // This will be considered to be the default diagnostic page for the assembly
        // The Url of this method will be &quot;/_fubu/harness&quot; where &quot;harness&quot; is the url
        // for the diagnostic group
        public string Index()
        {
            return &quot;some explanatory information&quot;;
        }

        // The [Description] attribute can be optionally used to define a title
        // and description to be used for this screen in navigation elements
        // The Url of this action will be &quot;/_fubu/harness/sample&quot;
        [Description(&quot;The Title:The description of what this page is&quot;)]
        public SomeViewModel get_sample()
        {
            // You&#39;ll probably add some data here;)
            return new SomeViewModel();
        }

        // This method will have the &quot;chrome&quot; around it
        // because it has the word &quot;details&quot; in the url
        public string get_some_details_Name(DetailRequest request)
        {
            return &quot;Some details about &quot; + request.Name;
        }

        // This method will not have any chrome applied because it&#39;s a chrome
        public string post_query(Query query)
        {
            return &quot;some data&quot;;
        }
    }

    public class DetailRequest
    {
        public string Name { get; set; }
    }

    public class Query
    {

    }
</pre>

<p>Diagnostic endpoints that respond to an Http <code>GET</code> without any route inputs are considered first class views that will be wrapped in the diagnostic <em>Chrome</em> and show up in the navigation menu bars.  You can set a title and description for the navigation elements by using the <code>System.ComponentModel.DescriptionAttribute</code> with the text format <em>[title]:[description]</em>.</p>

<p>Diagnostic endpoints that respond to an Http <code>GET</code> with route inputs that contain the text <em>details</em> in the Url will be wrapped in the diagnostic <em>Chrome</em>.</p>

<p>The title, description, and url names of a diagnostics group can be controlled by placing a concrete class with a default constructor named <code>FubuDiagnosticsConfiguration</code> into your assembly like this one:</p>

<pre data-linenums="7" class="prettyprint lang-cs">
    public class FubuDiagnosticsConfiguration
    {
        // Configures the url prefix for all the diagnostic views in this project
        // Think:  /_fubu/harness/[page url]
        // The default is just the name of the containing assembly
        public string Url = &quot;harness&quot;;

        // The user friendly name you&#39;d like shown in navigation elements
        // The default is the containing assembly name
        public string Title = &quot;Harness&quot;;

        // User friendly description for navigation elements 
        public string Description = &quot;This is merely a standin set of diagnostic pages for testing&quot;;
    }
</pre>







          </div>
        </div>
      </div>
    </div>

    <br></br>
    <hr></hr>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <ul class="nav"><li><a href="/fubumvc/index" data-key="index">FubuMVC &#187;</a></li><li><a href="/fubumvc/diagnostics" data-key="index">FubuMVC.Diagnostics &#187;</a></li><li class="active"><a href="/fubumvc/diagnostics/extending" data-key="index">Extending Diagnostics &#187;</a></li></ul>
<ul class="nav" style="float:right"><li><a href="/fubumvc/diagnostics/services" title="Service Registration">Previous</a></li><li><a href="/fubumvc/automated-testing" title="Automated Testing">Next</a></li></ul>
        </div>
      </div>
    </div>
    
    
    

<script type="text/javascript" src="/_content/scripts/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="/_content/scripts/prettify.js"></script>
<script type="text/javascript" src="/_content/scripts/bootstrap-prettify.js"></script>
<script type="text/javascript" src="/_content/scripts/fubudocs.js"></script>
<script type="text/javascript" src="/_content/scripts/jquery.nestable.js"></script>
<script type="text/javascript" src="/_content/scripts/toastr.js"></script>
<script type="text/javascript" src="/_content/scripts/twitter/bootstrap.min.js"></script>
<script type="text/javascript" src="/_content/scripts/diagnostics/bootstrap-scrollspy.js"></script>
<script type="text/javascript" src="/_content/scripts/fubudocs-tools.js"></script>
<script type="text/javascript" src="/_content/scripts/twitter/bootstrap-affix.js"></script>
<script type="text/javascript" src="/_content/scripts/topics.js"></script>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
    </p>
    <p>
      Powered by <a href="http://github.com/DarthFubuMVC/FubuDocs">FubuDocs</a>.
    </p>
  </div>
</footer>
  </body>
</html>