
<!doctype html>
<html lang="en">
  <head>
    <title>
      FubuTransportation - Handling Errors</title>
    
<meta charset="utf-8"/>
<meta name="description" content="FubuDocs"/>
<meta name="author" content="FubuDocs"/>




<link href="/_content/styles/sons-of-obsidian.css" rel="stylesheet" type="text/css" />
<link href="/_content/styles/toastr.css" rel="stylesheet" type="text/css" />
<link href="/_content/styles/twitter/bootstrap.min.css" rel="stylesheet" type="text/css" />
<link href="/_content/styles/twitter/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
<link href="/_content/styles/toastr-responsive.css" rel="stylesheet" type="text/css" />
<link href="/_content/styles/fubudocs.core.css" rel="stylesheet" type="text/css" />
<link href="/_content/styles/fubudocs.theme.css" rel="stylesheet" type="text/css" />

<link media="screen" type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Oswald:400,300">
  </head>
  <body data-spy="scroll" data-target=".bs-docs-sidebar">
      
    <div class="container">
      
      

<div class="row">
  <div class="span6">
    <p class="logo">
      <a href="/topics" title="Fubu" class="root-link"><span>Fubu</span></a>
      <a href="/fubutransportation" title="Low friction Service Bus using the best of the Fubu world" class="project-logo"><span>FubuTransportation</span></a>
    </p>
  </div>
  <div class="span6">
    <div class="top-header text-right">
      <em>
        <em><a href="https://groups.google.com/forum/?fromgroups#!forum/fubumvc-devel">Join our vibrant mailing list</a></em>
      </em>
      <div class="social">
        <a href="http://github.com/DarthFubuMVC/FubuTransportation" class="ico-github"><img alt="Github" src="/_content/images/github-icon.png" /></a>
      </div>
    </div>
  </div>
</div>
      

      <div id="nav-follow" class="navbar">
        <div class="navbar-inner">
          <div class="container">
            <ul class="nav"><li><a href="/fubutransportation" data-key="index">FubuTransportation &#187;</a></li><li><a href="/fubutransportation/basics" data-key="index">Basics &#187;</a></li><li class="active"><a href="/fubutransportation/basics/handling-errors" data-key="handling_errors">Handling Errors &#187;</a></li></ul>
<ul class="nav" style="float:right"><li><a href="/fubutransportation/basics/pub-sub" title="Pub / Sub">Previous</a></li><li><a href="/fubutransportation/understanding_the_message_handling_pipeline" title="Understanding the Message Handling Pipeline">Next</a></li></ul>
          </div>
        </div>
      </div>
      <hr/>
      <div class="row">
        
        

        <div class="row">
          <div class="span3 sidebar">
            
            <h3 class="half-margin">Topics</h3>
            <ul id="page-toc" class="nav nav-tabs nav-stacked affix">
            </ul>
            <br/>
            <h3>
              FubuTransportation v0.5.0.0
            </h3>

            <br/>
            <h3 class="no-margin">Next</h3>
<p><a href="/fubutransportation/understanding_the_message_handling_pipeline" data-key="index">Understanding the Message Handling Pipeline</a></p>
<h3 class="no-margin">Previous</h3>
<p><a href="/fubutransportation/basics/pub-sub" data-key="pub_sub">Pub / Sub</a></p>
          </div>
          <div class="span9">

              <h1 class="no-margin">Handling Errors</h1>
              <hr class="header-line topic-line"></hr>

            <!--Title: Handling Errors-->
<!--Url: handling-errors-->
<p>Other service bus frameworks allow you to retry when an error occurs in your handlers.
FubuTransportation allows you to specify an error policy for specific exception types and allow you to define
the behavior you want. Retry can be nice, but typically you only want to retry on errors that <em>can</em> succeed if you try again.
Here are some samples that show you the different ways you customize error handling behavior.</p>

<p>This will also unwrap AggregateExceptions and apply the policy to the inner exceptions for async chains.</p>

<pre data-linenums="8" class="prettyprint lang-cs">
    public class ErrorHandlingPolicy : HandlerChainPolicy
    {
        public override void Configure(HandlerChain handlerChain)
        {
            //when retrying, do so a maximum of 5 times
            handlerChain.MaximumAttempts = 5;

            //retry now
            handlerChain.OnException&lt;ConcurrencyException&gt;()
                .Retry();

            //retry again 5 seconds from now
            handlerChain.OnException&lt;ConcurrencyException&gt;()
                .RetryLater(TimeSpan.FromSeconds(5));

            //immediately move the error and original message to
            //the error queue
            handlerChain.OnException&lt;FileNotFoundException&gt;()
                .MoveToErrorQueue();

            //retries, but puts at the end of the line allowing other
            //messages to be processed
            handlerChain.OnException&lt;Exception&gt;()
                .Requeue();
        }
    }
</pre>

<p>Then just register your error handling policy in the FubuTransportRegistry.</p>

<pre data-linenums="37" class="prettyprint lang-cs">
    public class TransportRegistryWithErrorPolicy : FubuTransportRegistry
    {
        public TransportRegistryWithErrorPolicy()
        {
            //applies to all handler chains
            Global.Policy&lt;ErrorHandlingPolicy&gt;();

            //applies policy only to chains created from this registry
            Local.Policy&lt;ErrorHandlingPolicy&gt;();
        }
    }
</pre>



          </div>
        </div>
      </div>
    </div>

    

<script type="text/javascript" src="/_content/scripts/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="/_content/scripts/prettify.js"></script>
<script type="text/javascript" src="/_content/scripts/bootstrap-prettify.js"></script>
<script type="text/javascript" src="/_content/scripts/fubudocs.js"></script>
<script type="text/javascript" src="/_content/scripts/jquery.nestable.js"></script>
<script type="text/javascript" src="/_content/scripts/toastr.js"></script>
<script type="text/javascript" src="/_content/scripts/twitter/bootstrap.min.js"></script>
<script type="text/javascript" src="/_content/scripts/fubudocs-tools.js"></script>
<script type="text/javascript" src="/_content/scripts/twitter/bootstrap-affix.js"></script>
<script type="text/javascript" src="/_content/scripts/topics.js"></script>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
    </p>
    <p>
      Powered by <a href="http://github.com/DarthFubuMVC/FubuDocs">FubuDocs</a>.
    </p>
  </div>
</footer>
  </body>
</html>